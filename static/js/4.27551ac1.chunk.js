(this.webpackJsonpmarvel=this.webpackJsonpmarvel||[]).push([[4],{205:function(e,t,c){},213:function(e,t,c){"use strict";c.r(t);var a=c(5),r=c(0),n=c(43),s=c(45),i=c.p+"static/media/mjolnir.61f31e18.png",o=(c(94),c(3)),l=function(){var e=Object(r.useState)({}),t=Object(a.a)(e,2),c=t[0],l=t[1],u=Object(n.a)(),d=u.getCharactersById,j=u.clearError,h=u.procces,b=u.setProcces;Object(r.useEffect)((function(){f()}),[]);var m=function(e){e.description?e.description.length>215&&(e.description=e.description.substring(0,210)+"..."):e.description="There is no description for this character.",l(e)},f=function(){j();var e=Math.floor(400*Math.random()+1011e3);d(e).then(m).then((function(){return b("loaded")}))};return Object(o.jsxs)("div",{className:"randomchar",children:[Object(s.a)(h,(function(e){var t=e.data,c=t.name,a=t.description,r=t.thumbnail,n=t.homepage,s=t.wiki,i={objectFit:"cover"};return r&&-1!==r.indexOf("image_not_available")&&(i={objectFit:"unset"}),Object(o.jsxs)("div",{className:"randomchar__block",children:[Object(o.jsx)("img",{src:r,alt:"Random character",className:"randomchar__img",style:i}),Object(o.jsxs)("div",{className:"randomchar__info",children:[Object(o.jsx)("p",{className:"randomchar__name",children:c}),Object(o.jsx)("p",{className:"randomchar__descr",children:a}),Object(o.jsxs)("div",{className:"randomchar__btns",children:[Object(o.jsx)("a",{href:n,className:"button button__main",children:Object(o.jsx)("div",{className:"inner",children:"homepage"})}),Object(o.jsx)("a",{href:s,className:"button button__secondary",children:Object(o.jsx)("div",{className:"inner",children:"Wiki"})})]})]})]})}),c),Object(o.jsxs)("div",{className:"randomchar__static",children:[Object(o.jsxs)("p",{className:"randomchar__title",children:["Random character for today!",Object(o.jsx)("br",{}),"Do you want to get to know him better?"]}),Object(o.jsx)("p",{className:"randomchar__title",children:"Or choose another one"}),Object(o.jsx)("button",{className:"button button__main",onClick:function(){return f()},children:Object(o.jsx)("div",{className:"inner",children:"try it"})}),Object(o.jsx)("img",{src:i,alt:"mjolnir",className:"randomchar__decoration"})]})]})},u=c(8),d=(c(95),c(21)),j=function(e){var t=Object(r.useState)([]),c=Object(a.a)(t,2),i=c[0],l=c[1],j=Object(r.useState)(!1),h=Object(a.a)(j,2),b=h[0],m=h[1],f=Object(r.useState)(210),O=Object(a.a)(f,2),p=O[0],x=O[1],_=Object(r.useState)(!1),v=Object(a.a)(_,2),N=v[0],g=v[1],k=Object(n.a)(),w=k.getAllCharacters,y=k.procces,C=k.setProcces;Object(r.useEffect)((function(){E(p,!0)}),[]);var E=function(e,t){m(!t),w(e).then(S).then((function(){return C("loaded")}))},S=function(e){var t=!1;e<9&&(t=!0),l((function(t){return[].concat(Object(u.a)(t),Object(u.a)(e))})),m((function(e){return!1})),x((function(e){return e+9})),g((function(e){return t}))},F=Object(r.useRef)([]);function P(e){F.current.forEach((function(e){return e.classList.remove("char__item_selected")})),F.current[e].classList.add("char__item_selected"),F.current[e].focus()}var T="loading"===y&&b?Object(o.jsx)(d.a,{}):null,I=Object(r.useMemo)((function(){return Object(s.b)(y,(function(){return function(t){var c=t.map((function(t,c){var a=t.id,r=t.name,n=t.thumbnail,s=-1!==n.indexOf("image_not_available")?{objectFit:"unset"}:{objectFit:"cover"};return Object(o.jsxs)("li",{className:"char__item",tabIndex:0,ref:function(e){F.current[c]=e},onClick:function(){e.onCharSelected(a),P(c)},onKeyPress:function(t){" "!==t.key&&"Enter"!==t.key||(e.onCharSelected(a),P(c))},children:[Object(o.jsx)("img",{src:n,alt:"abyss",style:s}),Object(o.jsx)("div",{className:"char__name",children:r})]},a)}));return Object(o.jsx)("ul",{className:"char__grid",children:c})}(i)}),b)}),[y]);return Object(o.jsxs)("div",{className:"char__list",children:[I,T,Object(o.jsx)("button",{className:"button button__main button__long",disabled:b,style:{display:N?"none":"block"},onClick:function(){return E(p)},children:Object(o.jsx)("div",{className:"inner",children:"load more"})})]})},h=(c(96),function(e){var t=e.data,c=t.name,a=t.description,r=t.thumbnail,n=t.homepage,s=t.wiki,i=t.comics,l=-1!==r.indexOf("image_not_available")?{objectFit:"contain"}:{objectFit:"cover"};return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("div",{className:"char__basics",children:[Object(o.jsx)("img",{src:r,alt:c,style:l}),Object(o.jsxs)("div",{children:[Object(o.jsx)("div",{className:"char__info-name",children:c}),Object(o.jsxs)("div",{className:"char__btns",children:[Object(o.jsx)("a",{href:n,className:"button button__main",children:Object(o.jsx)("div",{className:"inner",children:"homepage"})}),Object(o.jsx)("a",{href:s,className:"button button__secondary",children:Object(o.jsx)("div",{className:"inner",children:"Wiki"})})]})]})]}),Object(o.jsx)("div",{className:"char__descr",children:a}),Object(o.jsx)("div",{className:"char__comics",children:"Comics:"}),Object(o.jsxs)("ul",{className:"char__comics-list",children:[i.length>0?null:"There is no comics with this character",i.map((function(e,t){if(t<10)return Object(o.jsx)("li",{className:"char__comics-item",children:e.name},t)}))]})]})}),b=function(e){var t=Object(r.useState)(null),c=Object(a.a)(t,2),i=c[0],l=c[1],u=Object(n.a)(),d=u.getCharactersById,j=u.clearError,b=u.procces,m=u.setProcces;Object(r.useEffect)((function(){f()}),[e.charId]);var f=function(){var t=e.charId;t&&(j(),d(t).then(l).then((function(){return m("loaded")})))};return Object(o.jsx)("div",{className:"char__info",children:Object(s.a)(b,h,i)})},m=c(208),f=c(14),O=c(22),p=c(209),x=(c(205),function(){var e=Object(r.useState)(),t=Object(a.a)(e,2),c=t[0],s=t[1],i=Object(n.a)(),l=i.getCharacterByName,u=i.clearError,d=i.procces,j=i.setProcces;function h(e){s(e)}var b="error"===d?Object(o.jsx)("div",{className:"char__search-critical-error",children:Object(o.jsx)(O.default,{})}):null,x=c?c.length>0?Object(o.jsxs)("div",{className:"char__search-wrapper",children:[Object(o.jsxs)("div",{className:"char__search-success",children:["There is! Visit ",c[0].name," page?"]}),Object(o.jsx)(f.b,{to:"/characters/".concat(c[0].id),className:"button button__secondary",children:Object(o.jsx)("div",{className:"inner",children:"To page"})})]}):Object(o.jsx)("div",{className:"char__search-error",children:"The character was not found. Check the name and try again"}):null;return Object(o.jsxs)("div",{className:"char__search-form",children:[Object(o.jsx)(m.d,{initialValues:{charName:""},validationSchema:p.a({charName:p.b().required("This field is required")}),onSubmit:function(e){var t,c=e.charName;t=c,u(),l(t).then(h).then((function(){return j("loaded")}))},children:Object(o.jsxs)(m.c,{children:[Object(o.jsx)("label",{className:"char__search-label",htmlFor:"charName",children:"Or find a character by name:"}),Object(o.jsxs)("div",{className:"char__search-wrapper",children:[Object(o.jsx)(m.b,{id:"charName",name:"charName",type:"text",placeholder:"Enter name"}),Object(o.jsx)("button",{type:"submit",className:"button button__main",disabled:"loading"===d,children:Object(o.jsx)("div",{className:"inner",children:"find"})})]}),Object(o.jsx)(m.a,{component:"div",className:"char__search-error",name:"charName"})]})}),x,b]})}),_=c.p+"static/media/vision.067d4ae1.png";t.default=function(){var e=Object(r.useState)(null),t=Object(a.a)(e,2),c=t[0],n=t[1];return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(l,{}),Object(o.jsxs)("div",{className:"char__content",children:[Object(o.jsx)(j,{onCharSelected:function(e){n(e)}}),Object(o.jsxs)("div",{children:[Object(o.jsx)(b,{charId:c}),Object(o.jsx)(x,{})]})]}),Object(o.jsx)("img",{className:"bg-decoration",src:_,alt:"vision"})]})}},43:function(e,t,c){"use strict";var a=c(4),r=c.n(a),n=c(7),s=c(5),i=c(0);t.a=function(){var e=function(){var e=Object(i.useState)("waiting"),t=Object(s.a)(e,2),c=t[0],a=t[1],o=Object(i.useCallback)(function(){var e=Object(n.a)(r.a.mark((function e(t){var c,n,s,i,o,l=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=l.length>1&&void 0!==l[1]?l[1]:"GET",n=l.length>2&&void 0!==l[2]?l[2]:null,s=l.length>3&&void 0!==l[3]?l[3]:{"Content-Type":"application/json"},a("loading"),e.prev=4,e.next=7,fetch(t,{method:c,body:n,headers:s});case 7:if((i=e.sent).ok){e.next=10;break}throw new Error("Could not fetch ".concat(t,", status: ").concat(i.status));case 10:return e.next=12,i.json();case 12:return o=e.sent,e.abrupt("return",o);case 16:throw e.prev=16,e.t0=e.catch(4),a("error"),e.t0;case 20:case"end":return e.stop()}}),e,null,[[4,16]])})));return function(t){return e.apply(this,arguments)}}(),[]),l=Object(i.useCallback)((function(){a("loading")}),[]);return{procces:c,setProcces:a,request:o,clearError:l}}(),t=e.procces,c=e.setProcces,a=e.request,o=e.clearError,l="https://gateway.marvel.com:443/v1/public/",u="apikey=320ff7c6ceeda2954463fb73190f424a",d=function(){var e=Object(n.a)(r.a.mark((function e(){var t,c,n=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:210,e.next=3,a("".concat(l,"characters?limit=9&offset=").concat(t,"&").concat(u));case 3:return c=e.sent,e.abrupt("return",c.data.results.map(f));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(n.a)(r.a.mark((function e(t){var c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a("".concat(l,"characters/").concat(t,"?").concat(u));case 2:return c=e.sent,e.abrupt("return",f(c.data.results[0]));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(n.a)(r.a.mark((function e(t){var c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a("".concat(l,"characters?name=").concat(t,"&").concat(u));case 2:return c=e.sent,e.abrupt("return",c.data.results.map(f));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(n.a)(r.a.mark((function e(){var t,c,n=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:250,e.next=3,a("".concat(l,"comics?orderBy=issueNumber&limit=8&offset=").concat(t,"&").concat(u));case 3:return c=e.sent,e.abrupt("return",c.data.results.map(O));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(n.a)(r.a.mark((function e(t){var c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a("".concat(l,"comics/").concat(t,"?").concat(u));case 2:return c=e.sent,e.abrupt("return",O(c.data.results[0]));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(e){return{id:e.id,name:e.name,description:e.description,thumbnail:"".concat(e.thumbnail.path,".").concat(e.thumbnail.extension),homepage:e.urls[0].url,wiki:e.urls[1].url,comics:e.comics.items}},O=function(e){return{id:e.id,title:e.title,description:e.description||"There is no description",pageCount:e.pageCount?"".concat(e.pageCount," p."):"No information about the number of pages",thumbnail:e.thumbnail.path+"."+e.thumbnail.extension,language:e.textObjects.language||"en-us",price:e.prices[0].price?"".concat(e.prices[0].price,"$"):"not available"}};return{procces:t,setProcces:c,getAllCharacters:d,getCharactersById:j,clearError:o,getAllComics:b,getComics:m,getCharacterByName:h}}},45:function(e,t,c){"use strict";c.d(t,"b",(function(){return i}));c(46);var a=c(3),r=function(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("p",{className:"char__select",children:"Please select a character to see information"}),Object(a.jsxs)("div",{className:"skeleton",children:[Object(a.jsxs)("div",{className:"pulse skeleton__header",children:[Object(a.jsx)("div",{className:"pulse skeleton__circle"}),Object(a.jsx)("div",{className:"pulse skeleton__mini"})]}),Object(a.jsx)("div",{className:"pulse skeleton__block"}),Object(a.jsx)("div",{className:"pulse skeleton__block"}),Object(a.jsx)("div",{className:"pulse skeleton__block"})]})]})},n=c(22),s=c(21),i=function(e,t,c){switch(e){case"waiting":return Object(a.jsx)(s.a,{width:"1100px"});case"loading":return c?Object(a.jsx)(t,{}):Object(a.jsx)(s.a,{});case"loaded":return Object(a.jsx)(t,{});case"error":return Object(a.jsx)(n.default,{});default:new Error("error in specified process")}};t.a=function(e,t,c){switch(e){case"waiting":return Object(a.jsx)(r,{});case"loading":return Object(a.jsx)(s.a,{});case"loaded":return Object(a.jsx)(t,{data:c});case"error":return Object(a.jsx)(n.default,{});default:new Error("error in specified process")}}},46:function(e,t,c){},94:function(e,t,c){},95:function(e,t,c){},96:function(e,t,c){}}]);
//# sourceMappingURL=4.27551ac1.chunk.js.map